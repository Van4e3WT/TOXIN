(()=>{"use strict";const t=function(){function t(){this.scaleDivisions=[]}return t.prototype.init=function(t,e){this.scale=document.createElement("div"),this.scale.classList.add(""+e);for(var i=0;i<t;i+=1){var s=document.createElement("div");s.classList.add(e+"-division"),this.scaleDivisions.push(s),this.scale.appendChild(s)}},t.prototype.getScale=function(){return this.scale},t.prototype.getScales=function(){return this.scaleDivisions},t.prototype.update=function(t){for(var e=t.parentThumbs,i=t.axis,s=t.thumbSize,n=t.min,a=t.max,o=this.scaleDivisions.length,r=e.getBoundingClientRect()[i.sizeParent]-s,u=0;u<o;u+=1){var l=u/(o-1);this.scaleDivisions[u].style[i.styleSelector]=l*r+(s/2-parseInt(getComputedStyle(e).borderWidth,10))+"px";var p=a-n;this.scaleDivisions[u].textContent=(""+(+(p*l).toFixed(12)+n)).replace(".",",")}},t}(),e=function(){function t(){this.thumbs=[]}return t.prototype.add=function(t,e){var i=document.createElement("div");i.classList.add(e+"__thumb"),t.appendChild(i),this.thumbs.push(i)},t.prototype.getN=function(t){return this.thumbs[t]},t.prototype.getSize=function(){return parseInt(getComputedStyle(this.thumbs[0]).width,10)},t.prototype.getLength=function(){return this.thumbs.length},t.prototype.setStyleN=function(t,e,i){this.thumbs[t].style[e]=i+"px"},t.prototype.getStyleN=function(t,e){return this.thumbs[t].style[e]},t}(),i=function(){function t(t){var e=t.postfix,i=void 0===e?"":e,s=t.localeProps,n=void 0===s?{}:s;this.localeProps=n,this.postfix=i,this.groupValues=[]}return t.prototype.createGroup=function(t){var e=t.parent,i=t.selector,s=t.isReadonly,n=void 0!==s&&s,a=document.createElement("div");a.classList.add(i);var o=document.createElement("input");if(o.type="text",o.classList.add(i+"-input"),o.readOnly=n,a.appendChild(o),this.postfix){var r=document.createElement("span");r.classList.add(i+"-postfix"),r.textContent=this.postfix,a.appendChild(r)}var u=document.createElement("span");u.classList.add(i+"-hided"),this.groupValues.push({parent:a,input:o,hided:u}),e.appendChild(a),e.appendChild(u)},t.prototype.init=function(){var t=this;function e(t){var e=this.groupValues[t].input.value;e&&(this.groupValues[t].hided.textContent=e,this.groupValues[t].input.style.width=this.groupValues[t].hided.offsetWidth+2+"px")}this.groupValues.forEach((function(i,s){t.groupValues[s].input.addEventListener("input",e.bind(t,s)),window.addEventListener("load",e.bind(t,s))}))},t.prototype.getValues=function(){return this.groupValues.map((function(t){return t.input}))},t.prototype.updateN=function(t,e){this.groupValues[t].hided.textContent=e.toLocaleString("ru",this.localeProps),this.groupValues[t].input.value=this.groupValues[t].hided.textContent,this.groupValues[t].input.style.width=this.groupValues[t].hided.offsetWidth+2+"px"},t.prototype.styleN=function(t,e,i){this.groupValues[t].parent.style[e]=i+"px"},t}(),s=function(){function t(){this.events={}}return t.prototype.on=function(t,e){return(this.events[t]||(this.events[t]=[])).push(e),this},t.prototype.emit=function(t,e){(this.events[t]||[]).slice().forEach((function(t){return t(e)}))},t}();var n,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const o=function(s){function n(n,a,o){var r=s.call(this)||this;r.updateScale=function(){r.scale.update({parentThumbs:r.parentThumbs,axis:r.axis,thumbSize:r.thumbSize,min:r.min,max:r.max})},r.scale=new t,r.outputs=new i({postfix:o.postfix,localeProps:o.localeProps}),r.thumbs=new e,r.min=o.minValue,r.max=o.maxValue,r.length=n.length,r.isPopUp=o.popUpOfValue,r.orientation="vertical"===o.orientation,r.initOrientation(a),r.renderHeader(a,o.description);var u=document.createElement("div");u.classList.add("multislider-v43__body"),a.appendChild(u),r.parentThumbs=u;for(var l=0;l<r.length;l+=1)r.thumbs.add(u,"multislider-v43"),r.isPopUp&&r.outputs.createGroup({parent:u,selector:"multislider-v43__popup",isReadonly:!0});return r.thumbSize=r.thumbs.getSize(),r.renderProgressBar(u,o.isProgressBar),r.renderScale(u,o.scaleOfValues),r.outputs.init(),r.update(n),r}return a(n,s),n.prototype.getThumbSize=function(){return this.thumbSize},n.prototype.getAxis=function(){return this.orientation},n.prototype.update=function(t){for(var e=this.parentThumbs.getBoundingClientRect()[this.axis.sizeParent]-this.thumbSize,i=0;i<this.thumbs.getLength();i+=1){var s=e*((t[i]-this.min)/(this.max-this.min))-parseInt(getComputedStyle(this.parentThumbs).borderWidth,10);this.thumbs.setStyleN(i,this.axis.styleSelector,s),this.outputs.updateN(i,t[i]),this.isPopUp&&this.outputs.styleN(i,this.axis.styleSelector,s+this.getThumbSize()/2)}this.sliderRange&&(1===this.thumbs.getLength()&&(this.sliderRange.style[this.axis.sizeParent]=parseInt(this.thumbs.getStyleN(0,this.axis.styleSelector),10)+this.thumbSize/2+"px"),2===this.thumbs.getLength()&&(this.sliderRange.style[this.axis.styleSelector]=parseInt(this.thumbs.getStyleN(0,this.axis.styleSelector),10)+this.thumbSize/2+"px",this.sliderRange.style[this.axis.sizeParent]=parseInt(this.thumbs.getStyleN(1,this.axis.styleSelector),10)-parseInt(this.thumbs.getStyleN(0,this.axis.styleSelector),10)+"px"))},n.prototype.initOrientation=function(t){this.orientation?(t.classList.add("multislider-v43_vertical"),this.axis={sizeParent:"height",styleSelector:"bottom"}):this.axis={sizeParent:"width",styleSelector:"left"}},n.prototype.renderHeader=function(t,e){var i=document.createElement("div");i.classList.add("multislider-v43__header"),t.appendChild(i);var s=document.createElement("div");if(s.classList.add("multislider-v43__description"),s.textContent=e,i.appendChild(s),!this.isPopUp){var n=document.createElement("div");if(n.classList.add("multislider-v43__output"),i.appendChild(n),this.outputs.createGroup({parent:n,selector:"multislider-v43__value"}),2===this.length){var a=document.createElement("div");a.classList.add("multislider-v43__spacer"),a.textContent=" – ",n.appendChild(a),this.outputs.createGroup({parent:n,selector:"multislider-v43__value"})}}},n.prototype.renderProgressBar=function(t,e){e&&(this.sliderRange=document.createElement("div"),this.sliderRange.classList.add("multislider-v43__range"),t.appendChild(this.sliderRange))},n.prototype.renderScale=function(t,e){if(e){t.classList.add("multislider-v43__body_scaled"),this.scale.init(e<3?3:e,"multislider-v43__scale");var i=this.scale.getScale();t.appendChild(i),this.updateScale()}},n}(s);var r=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();const u=function(t){function e(e,i){var s=t.call(this)||this;return s.updateListener=function(){s.view.update.call(s.view,s.model.getValue())},s.model=e,s.view=i,s.initOrientation(),s}return r(e,t),e.prototype.initListeners=function(){this.updateInit(),this.thumbInit(),this.outputInit(),this.view.scale.getScales().length&&this.scaleInit()},e.prototype.initOrientation=function(){this.view.getAxis()?this.axis={eventAxis:"pageY",sizeParent:"height",dPos:-1}:this.axis={eventAxis:"pageX",sizeParent:"width",dPos:1}},e.prototype.updateInit=function(){this.model.on("valueChanged",this.updateListener),window.addEventListener("resize",this.updateListener),window.addEventListener("resize",this.view.updateScale),document.addEventListener("DOMContentLoaded",this.updateListener),document.addEventListener("DOMContentLoaded",this.view.updateScale)},e.prototype.thumbInit=function(){for(var t=this,e=function(e){var s,n,a=!1;i.view.thumbs.getN(e).addEventListener("pointerdown",function(e,i){s=i[t.axis.eventAxis],n=t.model.getValue()[e],a=!0}.bind(i,e)),document.addEventListener("pointermove",function(i){if(a){var o=(i[t.axis.eventAxis]-s)*t.axis.dPos/(t.view.parentThumbs.getBoundingClientRect()[t.axis.sizeParent]-t.view.getThumbSize())*(t.model.getMax()-t.model.getMin())+n;0===e?t.model.setValue({val1:o}):1===e&&t.model.setValue({val2:o})}}.bind(i)),document.addEventListener("pointerup",(function(){a=!1}))},i=this,s=0;s<this.view.thumbs.getLength();s+=1)e(s)},e.prototype.outputInit=function(){var t=this;function e(t){var e=this.view.outputs.getValues()[t].value.replace(/,/g,".");Number(e)?0===t?this.model.setValue({val1:+e}):this.model.setValue({val2:+e}):this.view.outputs.updateN(t,this.model.getValue()[t])}this.view.outputs.getValues().forEach((function(i,s){i.addEventListener("change",e.bind(t,s))}))},e.prototype.scaleInit=function(){this.view.scale.getScale().addEventListener("click",function(t){var e=t.target;if(e.matches(".multislider-v43__scale-division")){var i=+e.textContent.replace(",",".");2===this.model.getValue().length&&Math.abs(i-this.model.getValue()[1])<Math.abs(i-this.model.getValue()[0])?this.model.setValue({val2:i},!1):this.model.setValue({val1:i},!1)}}.bind(this))},e}(s);var l=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();const p=function(t){function e(e){var i=t.call(this)||this;return i.thumbs=[],i.step=e.step,i.thumbs.push({min:e.min,max:e.max,value:(e.max-e.min)/2}),i.setValue({val1:e.value1},!1),i}return l(e,t),e.prototype.getMin=function(){return this.thumbs[0].min},e.prototype.getMax=function(){return this.thumbs[0].max},e.prototype.getValue=function(){return this.thumbs.map((function(t){return t.value}))},e.prototype.setValue=function(t,e){void 0===e&&(e=!0);var i=t.val1;null!=i&&(e&&(i=Math.round(i/this.step)/(1/this.step)),i=(i=i>this.thumbs[0].max?this.thumbs[0].max:i)<this.thumbs[0].min?this.thumbs[0].min:i,this.thumbs[0].value=i),this.emit("valueChanged",{value1:t.val1})},e}(s),h=function(t,e){return[e,t]};var d=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();const c=function(t){function e(e){var i,s=t.call(this)||this,n=e.value1,a=e.value2;return s.min=e.min,s.max=e.max,s.step=e.step,n>a&&(n=(i=h(n,a))[0],a=i[1]),s.thumbs=[],s.thumbs.push({min:s.min,max:a,value:s.min}),s.thumbs.push({min:n,max:s.max,value:s.max}),s.setValue({val1:n,val2:a},!1),s}return d(e,t),e.prototype.getMin=function(){return this.min},e.prototype.getMax=function(){return this.max},e.prototype.getValue=function(){return this.thumbs.map((function(t){return t.value}))},e.prototype.setValue=function(t,e){var i;void 0===e&&(e=!0);var s=t.val1,n=t.val2;(null!=s||null!=n)&&((s=null!=s?s:this.thumbs[0].value)>(n=null!=n?n:this.thumbs[1].value)&&(s=(i=h(s,n))[0],n=i[1]),e&&(s=Math.round(s/this.step)/(1/this.step),n=Math.round(n/this.step)/(1/this.step)),s=s<this.min?this.min:s,n=n>this.max?this.max:n,this.thumbs[0].value=s,this.thumbs[0].max=n,this.thumbs[1].value=n,this.thumbs[1].min=s),this.emit("valueChanged",{value1:s,value2:n})},e}(s);!function(t){t.fn.multislider=function(e){var i,s,n,a,r,l,h,d,v,m,f,g,b={minValue:null!==(i=e.minValue)&&void 0!==i?i:0,maxValue:null!==(s=e.maxValue)&&void 0!==s?s:1e3,step:null!==(n=e.step)&&void 0!==n?n:1,value1:null!==(a=e.value1)&&void 0!==a?a:e.minValue,value2:null!==(r=e.value2)&&void 0!==r?r:e.maxValue,orientation:null!==(l=e.orientation)&&void 0!==l?l:"horizontal",sliderType:null!==(h=e.sliderType)&&void 0!==h?h:"solo",popUpOfValue:null!==(d=e.popUpOfValue)&&void 0!==d&&d,scaleOfValues:null!==(v=e.scaleOfValues)&&void 0!==v?v:0,isProgressBar:null===(m=e.isProgressBar)||void 0===m||m,postfix:e.postfix,description:null!==(f=e.description)&&void 0!==f?f:"Range Slider",localeProps:e.localeProps},y=this[0];if(0===this.length)throw new Error("Not found element for initialization");if(y.childElementCount)for(;y.firstChild;)y.removeChild(y.firstChild);y.classList.contains("multislider-v43")||y.classList.add("multislider-v43"),y.classList.remove("multislider-v43_vertical");var x={min:b.minValue,max:b.maxValue,step:b.step,value1:b.value1};switch(b.sliderType){case"solo":g=new p(x);break;case"double":x.value2=b.value2,g=new c(x);break;default:throw new Error("Undefined type slider")}var _=new o(g.getValue(),y,b);new u(g,_).initListeners(),t.fn.multislider.value=function(t){return g.setValue({val1:t.val1,val2:t.val2}),g.getValue()}}}(jQuery),$(".js-multislider-v43").each((function(t,e){var i={};e.hasAttribute("data-min-value")&&(i.minValue=+e.getAttribute("data-min-value")),e.hasAttribute("data-max-value")&&(i.maxValue=+e.getAttribute("data-max-value")),e.hasAttribute("data-step")&&(i.step=+e.getAttribute("data-step")),e.hasAttribute("data-value1")&&(i.value1=+e.getAttribute("data-value1")),e.hasAttribute("data-value2")&&(i.value2=+e.getAttribute("data-value2")),e.hasAttribute("data-orientation")&&(i.orientation=e.getAttribute("data-orientation")),e.hasAttribute("data-slider-type")&&(i.sliderType=e.getAttribute("data-slider-type")),e.hasAttribute("data-pop-up-of-value")&&(i.popUpOfValue="true"===e.getAttribute("data-pop-up-of-value")),e.hasAttribute("data-scale-of-values")&&(i.scaleOfValues=+e.getAttribute("data-scale-of-values")),e.hasAttribute("data-is-progress-bar")&&(i.isProgressBar="true"===e.getAttribute("data-is-progress-bar")),e.hasAttribute("data-description")&&(i.description=e.getAttribute("data-description")),e.hasAttribute("data-postfix")&&(i.postfix=e.getAttribute("data-postfix")),$(e).multislider(i)}))})();